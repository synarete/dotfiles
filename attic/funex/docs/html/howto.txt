===========
Try it out!
===========

.. include:: common.txt


Overview
========

In this guide we would show you how to run and test the Funex filesystem on you
local machine. For the sake of simplicity, we would use regular file as the
back-end storage-volume for the file system, and use ``tmpfs`` so no leftovers
remain on your local drive.  However, if you do want to use raw-partition or
block device you can safely do so, but you would probably need to be a privileged
user, or have read-write permissions to that device.

..

Preparations
============

Funex is a `FUSE`_ based file-system so you may need to do few tweaks to enable
fuse on you local machine. Make sure that the ``fuse.ko`` module is loaded, and
that the ``user_allow_other`` flag is enabled in ``/etc/fuse.conf``::

  $ sudo modinfo fuse
  filename:       /lib/modules/.../kernel/fs/fuse/fuse.ko
  ...
  $ cat /etc/fuse.conf
  # mount_max = 1000
  user_allow_other

..

Install funex on your local system, as described in :doc:`build`. Make sure that
both ``funex`` and ``funex-fsd`` programs are in your ``PATH`` variable::

  $ which funex
  $ funex --version
  $ funex-fsd --version

..


Creation
========

Create working area in ``tmpfs``::

  $ mkdir -p /tmp/funex/mnt /tmp/funex/dat


Format new filesystem volume of 1G bytes::

  $ funex mkfs --size=1G /tmp/funex/dat/volume
  ...
  $ stat -c %s /tmp/funex/dat/volume
  1073741824

..

Execution
=========

Mount the newly create funex filesystem::

  $ funex mount /tmp/funex/dat/volume /tmp/funex/mnt
  $ funex heads
  /tmp/funex/mnt

..

Try it::

  $ ps -e | grep funex
  8310 ?        00:00:00 funex-fsd

  $ echo "hello, world" > /tmp/funex/mnt/hello
  $ cat /tmp/funex/mnt/hello
  hello, world

..

Please note that that the actual process which serves the filesystem is called
``funex-fsd``. The ``funex`` command is just a front-end utility. Try running
``funex --help`` to see a detailed list of available commands.


Cleanup
=======

Unmount the funex filesystem and remove its storage volume::

  $ funex umount /tmp/funex/mnt
  $ ps -e | grep funex

  $ rm -rf /tmp/funex

..




